---
name: "StockPrediction"
dataIns:
- name: "symbols"
  type: "collection"
  source: "symbols"
  passing: true
- name: "bucket_name"
  type: "string"
  source: "bucket_name"
  passing: true
- name: "file_name"
  type: "string"
  source: "file_name"
  passing: true
- name: "input_length"
  type: "string"
  source: "input_length"
  passing: true
workflowBody:
- parallelFor:
    name: "PFRetrieveStockPrices"
    dataIns:
    - name: "symbols"
      type: "collection"
      source: "StockPrediction/symbols"
      constraints:
      - name: "distribution"
        value: "BLOCK(1)"
    loopCounter:
      type: "number"
      from: "0"
      to: "StockPrediction/input_length"
      step: "1"
    loopBody:
    - function:
        name: "retrieveStockPrices"
        dataIns:
        - name: "symbol"
          type: "string"
          source: "PFRetrieveStockPrices/symbols"
        dataOuts:
        - name: "stockPrices"
          type: "collection"
        properties:
        - name: "resource"
          value: "python:arn:aws:lambda:us-east-1:582784785991:function:RetrieveStockPrices"
    dataOuts:
    - name: "stockPrices"
      type: "collection"
      source: "retrieveStockPrices/stockPrices"
      constraints:
      - name: "aggregation"
        value: "+"
- function:
    name: "WriteToS3"
    dataIns:
    - name: "input"
      type: "collection"
      source: "PFRetrieveStockPrices/stockPrices"
    - name: "bucket_name"
      type: "string"
      source: "StockPrediction/bucket_name"
    - name: "file_name"
      type: "string"
      source: "StockPrediction/file_name"
    properties:
    - name: "resource"
      value: "python:arn:aws:lambda:us-east-1:582784785991:function:WriteToS3"
- function:
    name: "createDataset"
    dataIns:
    - name: "bucket_name"
      type: "string"
      source: "StockPrediction/bucket_name"
    - name: "file_name"
      type: "string"
      source: "StockPrediction/file_name"
    dataOuts:
    - name: "dataset_group_arn"
      type: "string"
    properties:
    - name: "resource"
      value: "python:arn:aws:lambda:us-east-1:582784785991:function:CreateDataset"
- function:
    name: "createPredictor"
    type: "aType"
    dataIns:
    - name: "dataset_group_arn"
      type: "string"
      source: "createDataset/dataset_group_arn"
    dataOuts:
    - name: "predictor_arn"
      type: "string"
    properties:
    - name: "resource"
      value: "python:arn:aws:lambda:us-east-1:582784785991:function:CreatePredictor"
- function:
    name: "createForecast"
    type: "aType"
    dataIns:
    - name: "predictor_arn"
      type: "string"
      source: "createPredictor/predictor_arn"
    dataOuts:
    - name: "forecast_arn"
      type: "string"
    properties:
    - name: "resource"
      value: "python:arn:aws:lambda:us-east-1:582784785991:function:CreateForecast"
- parallelFor:
    name: "PFVisualize"
    dataIns:
    - name: "symbols"
      type: "collection"
      source: "StockPrediction/symbols"
      constraints:
      - name: "distribution"
        value: "BLOCK(1)"
    loopCounter:
      type: "number"
      from: "1"
      to: "StockPrediction/input_length"
      step: "1"
    loopBody:
    - function:
        name: "visualizeForecast"
        type: "aType"
        dataIns:
        - name: "symbol"
          type: "string"
          source: "PFVisualize/symbols"
        - name: "forecast_arn"
          type: "string"
          source: "createForecast/forecast_arn"
        - name: "bucket_name"
          type: "string"
          source: "StockPrediction/bucket_name"
        properties:
        - name: "resource"
          value: "python:arn:aws:lambda:us-east-1:582784785991:function:VisualizeForecast"
