---
name: "StockPrediction"
dataIns:
- name: "symbols"
  type: "collection"
  source: "symbols"
- name: "inputlength"
  type: "number"
  source: "inputlength"
- name: "bucket"
  type: "string"
  source: "bucket"
workflowBody:
- parallelFor:
    name: "PFRetrieveStockPrices"
    dataIns:
    - name: "symbols"
      type: "collection"
      source: "StockPrediction/symbols"
      constraints:
      - name: "distribution"
        value: "BLOCK(1)"
    - name: "bucket"
      type: "string"
      source: "StockPrediction/bucket"
      constraints:
      - name: "distribution"
        value: "BLOCK(1)"
    loopCounter:
      type: "number"
      from: "0"
      to: "StockPrediction/inputlength"
      step: "1"
    loopBody:
    - function:
        name: "retrieveStockPrices"
        dataIns:
        - name: "symbol"
          type: "string"
          source: "PFRetrieveStockPrices/symbols"
        - name: "bucket"
          type: "string"
          source: "PFRetrieveStockPrices/bucket"
        dataOuts:
        - name: "symbol"
          type: "string"
        - name: "bucket"
          type: "string"
        properties:
        - name: "resource"
          value: "python:arn:aws:lambda:us-east-1:582784785991:function:RetrieveStockPrices"
    - function:
        name: "predict"
        dataIns:
        - name: "symbol"
          type: "string"
          source: "retrieveStockPrices/symbol"
        - name: "bucket"
          type: "string"
          source: "retrieveStockPrices/bucket"
        dataOuts:
        - name: "symbol"
          type: "string"
        - name: "bucket"
          type: "string"
        properties:
        - name: "resource"
          value: "python:arn:aws:lambda:us-east-1:582784785991:function:CreateForecast"
    - function:
        name: "visualize"
        dataIns:
        - name: "symbol"
          type: "string"
          source: "predict/symbol"
        - name: "bucket"
          type: "string"
          source: "predict/bucket"
        dataOuts:
        - name: "result"
          type: "string"
        properties:
        - name: "resource"
          value: "python:arn:aws:lambda:us-east-1:582784785991:function:visulaizeForecast"
    dataOuts:
    - name: "result"
      type: "collection"
      source: "visualize/result"
dataOuts:
- name: "result"
  type: "collection"
  source: "PFRetrieveStockPrices/result"
